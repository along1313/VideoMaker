{% extends "base.html" %}

{% block title %}联系我们{% endblock %}

{% block content %}
<div class="min-h-screen pt-20 pb-16">
    <div class="container mx-auto px-6 max-w-7xl">
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
                    联系我们
                </span>
            </h1>
            <p class="text-lg text-slate-400 max-w-2xl mx-auto">有任何问题或建议，请通过以下方式联系我们</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <!-- 联系方式 -->
        <div class="bg-glass rounded-2xl p-8 shadow-2xl shadow-slate-900/50">
            <div class="flex items-center space-x-3 mb-6">
                <span class="material-icons text-blue-400 text-2xl">contact_page</span>
                <h3 class="text-xl font-bold text-white">联系方式</h3>
            </div>
            
            <div class="space-y-6">
                <div class="flex items-center space-x-4 p-4 bg-slate-800/30 rounded-xl">
                    <div class="bg-green-500/20 p-3 rounded-full">
                        <span class="material-icons text-green-400">chat</span>
                    </div>
                    <div>
                        <div class="text-white font-medium">客服微信号</div>
                        <div class="text-slate-400 text-sm">baisuai-CS</div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4 p-4 bg-slate-800/30 rounded-xl">
                    <div class="bg-blue-500/20 p-3 rounded-full">
                        <span class="material-icons text-blue-400">email</span>
                    </div>
                    <div>
                        <div class="text-white font-medium">邮箱联系</div>
                        <div class="text-slate-400 text-sm">info@baisuai.com</div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4 p-4 bg-slate-800/30 rounded-xl">
                    <div class="bg-purple-500/20 p-3 rounded-full">
                        <span class="material-icons text-purple-400">support_agent</span>
                    </div>
                    <div>
                        <div class="text-white font-medium">在线支持</div>
                        <div class="text-slate-400 text-sm">工作日 9:00-18:00</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 留言表单 -->
        <div class="bg-glass rounded-2xl p-8 shadow-2xl shadow-slate-900/50">
            <div class="flex items-center space-x-3 mb-6">
                <span class="material-icons text-blue-400 text-2xl">send</span>
                <h3 class="text-xl font-bold text-white">给我们留言</h3>
            </div>
            
            <form id="messageForm" method="POST" class="space-y-8">
                <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                    <div>
                        <label for="email" class="block text-slate-300 font-medium mb-3">
                            邮箱 <span class="text-red-400">*</span>
                        </label>
                        <input type="email" 
                               id="email" 
                               name="email" 
                               required
                               class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-4 text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-300">
                                </div>
                    <div>
                        <label for="wechat" class="block text-slate-300 font-medium mb-3">微信号</label>
                        <input type="text" 
                               id="wechat" 
                               name="wechat"
                               class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-4 text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-300">
                                </div>
                            </div>
                            
                <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                    <div>
                        <label for="qq" class="block text-slate-300 font-medium mb-3">QQ号</label>
                        <input type="text" 
                               id="qq" 
                               name="qq"
                               class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-4 text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-300">
                                </div>
                    <div>
                        <label for="phone" class="block text-slate-300 font-medium mb-3">手机号码</label>
                        <input type="tel" 
                               id="phone" 
                               name="phone"
                               class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-4 text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-300">
                                </div>
                            </div>
                            
                <div>
                    <label for="content" class="block text-slate-300 font-medium mb-3">
                        留言内容 <span class="text-red-400">*</span>
                    </label>
                    <textarea id="content" 
                              name="content" 
                              rows="10" 
                              required
                              placeholder="请输入您的留言内容，我们会尽快回复您..."
                              class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-4 text-white placeholder-slate-400 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all duration-300 resize-none"></textarea>
                            </div>
                            
                <div class="text-center pt-4">
                    <button type="submit" 
                            class="btn-primary text-white font-bold py-4 px-10 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 inline-flex items-center justify-center space-x-2">
                        <span class="material-icons">send</span>
                        <span>发送留言</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

<!-- 成功/错误提示 -->
<el-dialog
    :title="modalTitle"
    :visible.sync="showModal"
    width="400px"
    center
    class="message-modal">
    <div class="text-center py-4">
        <div v-if="modalType === 'success'" class="text-green-400 mb-4">
            <span class="material-icons text-6xl">check_circle</span>
            </div>
        <div v-else class="text-red-400 mb-4">
            <span class="material-icons text-6xl">error</span>
        </div>
        <p class="text-slate-300 text-lg" v-text="modalMessage"></p>
    </div>
    <span slot="footer" class="dialog-footer">
        <el-button @click="showModal = false" type="primary">确定</el-button>
    </span>
</el-dialog>

<script>
document.addEventListener('DOMContentLoaded', function() {
    new Vue({
        el: '#app',
        data() {
            return {
                showModal: false,
                modalTitle: '',
                modalMessage: '',
                modalType: 'success'
            }
        },
        mounted() {
            this.initForm();
        },
        methods: {
            initForm() {
    const messageForm = document.getElementById('messageForm');
                if (messageForm) {
                    messageForm.addEventListener('submit', this.handleSubmit.bind(this));
                }
            },
            handleSubmit(e) {
        e.preventDefault();
        
                const form = e.target;
                const formData = new FormData(form);
                const submitButton = form.querySelector('button[type="submit"]');
        
        // 显示加载状态
        submitButton.disabled = true;
                const originalContent = submitButton.innerHTML;
                submitButton.innerHTML = '<span class="material-icons animate-spin">refresh</span><span>发送中...</span>';
        
        fetch('{{ url_for("contact") }}', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                        this.modalTitle = '发送成功';
                        this.modalMessage = data.message;
                        this.modalType = 'success';
                        form.reset();
            } else {
                        this.modalTitle = '发送失败';
                        this.modalMessage = data.message;
                        this.modalType = 'error';
            }
                    this.showModal = true;
        })
        .catch(error => {
            console.error('Error:', error);
                    this.modalTitle = '发送失败';
                    this.modalMessage = '网络错误，请稍后重试';
                    this.modalType = 'error';
                    this.showModal = true;
        })
        .finally(() => {
            // 恢复按钮状态
            submitButton.disabled = false;
                    submitButton.innerHTML = originalContent;
        });
            }
        }
    });
});
</script>

<style>
/* 消息模态框样式 */
.message-modal .el-dialog {
    background-color: var(--slate-800) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
}

.message-modal .el-dialog__header {
    background-color: var(--slate-800) !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
}

.message-modal .el-dialog__title {
    color: var(--light-color) !important;
    font-weight: 600 !important;
}

.message-modal .el-dialog__body {
    background-color: var(--slate-800) !important;
}

.message-modal .el-dialog__footer {
    background-color: var(--slate-800) !important;
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
}

/* 动画效果 */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.animate-spin {
    animation: spin 1s linear infinite;
}

/* 输入框焦点效果 */
input:focus, textarea:focus {
    outline: none;
}
</style>
{% endblock %} 